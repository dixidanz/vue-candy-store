(function(t){function n(n){for(var a,o,u=n[0],i=n[1],s=n[2],d=0,f=[];d<u.length;d++)o=u[d],r[o]&&f.push(r[o][0]),r[o]=0;for(a in i)Object.prototype.hasOwnProperty.call(i,a)&&(t[a]=i[a]);p&&p(n);while(f.length)f.shift()();return c.push.apply(c,s||[]),e()}function e(){for(var t,n=0;n<c.length;n++){for(var e=c[n],a=!0,o=1;o<e.length;o++){var u=e[o];0!==r[u]&&(a=!1)}a&&(c.splice(n--,1),t=i(i.s=e[0]))}return t}var a={},o={app:0},r={app:0},c=[];function u(t){return i.p+"js/"+({}[t]||t)+"."+{"chunk-1338f2d8":"abffc5ea","chunk-18cbd9a0":"bc6acc17","chunk-362b8523":"1b9818ce","chunk-39a7ac38":"dda18fab","chunk-4ffb7f31":"7fd02bbb","chunk-5e6de54f":"dba31f69","chunk-6183d3f2":"cbc8e95a","chunk-7ce5ee79":"32712ef0","chunk-a15b4a30":"0c7b6496","chunk-a59a8832":"ac011e8f","chunk-ae77ab6c":"4fa63b86","chunk-bfff6bca":"ae8ecb5e"}[t]+".js"}function i(n){if(a[n])return a[n].exports;var e=a[n]={i:n,l:!1,exports:{}};return t[n].call(e.exports,e,e.exports,i),e.l=!0,e.exports}i.e=function(t){var n=[],e={"chunk-1338f2d8":1,"chunk-18cbd9a0":1,"chunk-362b8523":1,"chunk-39a7ac38":1,"chunk-4ffb7f31":1,"chunk-5e6de54f":1,"chunk-6183d3f2":1,"chunk-7ce5ee79":1,"chunk-a15b4a30":1,"chunk-a59a8832":1,"chunk-ae77ab6c":1,"chunk-bfff6bca":1};o[t]?n.push(o[t]):0!==o[t]&&e[t]&&n.push(o[t]=new Promise(function(n,e){for(var a="css/"+({}[t]||t)+"."+{"chunk-1338f2d8":"9348a101","chunk-18cbd9a0":"3d0c595b","chunk-362b8523":"7a6ea1d0","chunk-39a7ac38":"eaad786e","chunk-4ffb7f31":"929781b5","chunk-5e6de54f":"8b5fefc0","chunk-6183d3f2":"d82593c2","chunk-7ce5ee79":"8b5fefc0","chunk-a15b4a30":"1dc52eea","chunk-a59a8832":"461356fc","chunk-ae77ab6c":"4a7d6341","chunk-bfff6bca":"8b5fefc0"}[t]+".css",o=i.p+a,r=document.getElementsByTagName("link"),c=0;c<r.length;c++){var u=r[c],s=u.getAttribute("data-href")||u.getAttribute("href");if("stylesheet"===u.rel&&(s===a||s===o))return n()}var d=document.getElementsByTagName("style");for(c=0;c<d.length;c++){u=d[c],s=u.getAttribute("data-href");if(s===a||s===o)return n()}var f=document.createElement("link");f.rel="stylesheet",f.type="text/css",f.onload=n,f.onerror=function(n){var a=n&&n.target&&n.target.src||o,r=new Error("Loading CSS chunk "+t+" failed.\n("+a+")");r.request=a,e(r)},f.href=o;var p=document.getElementsByTagName("head")[0];p.appendChild(f)}).then(function(){o[t]=0}));var a=r[t];if(0!==a)if(a)n.push(a[2]);else{var c=new Promise(function(n,e){a=r[t]=[n,e]});n.push(a[2]=c);var s,d=document.getElementsByTagName("head")[0],f=document.createElement("script");f.charset="utf-8",f.timeout=120,i.nc&&f.setAttribute("nonce",i.nc),f.src=u(t),s=function(n){f.onerror=f.onload=null,clearTimeout(p);var e=r[t];if(0!==e){if(e){var a=n&&("load"===n.type?"missing":n.type),o=n&&n.target&&n.target.src,c=new Error("Loading chunk "+t+" failed.\n("+a+": "+o+")");c.type=a,c.request=o,e[1](c)}r[t]=void 0}};var p=setTimeout(function(){s({type:"timeout",target:f})},12e4);f.onerror=f.onload=s,d.appendChild(f)}return Promise.all(n)},i.m=t,i.c=a,i.d=function(t,n,e){i.o(t,n)||Object.defineProperty(t,n,{enumerable:!0,get:e})},i.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,n){if(1&n&&(t=i(t)),8&n)return t;if(4&n&&"object"===typeof t&&t&&t.__esModule)return t;var e=Object.create(null);if(i.r(e),Object.defineProperty(e,"default",{enumerable:!0,value:t}),2&n&&"string"!=typeof t)for(var a in t)i.d(e,a,function(n){return t[n]}.bind(null,a));return e},i.n=function(t){var n=t&&t.__esModule?function(){return t["default"]}:function(){return t};return i.d(n,"a",n),n},i.o=function(t,n){return Object.prototype.hasOwnProperty.call(t,n)},i.p="/vue-candy-store/",i.oe=function(t){throw console.error(t),t};var s=window["webpackJsonp"]=window["webpackJsonp"]||[],d=s.push.bind(s);s.push=n,s=s.slice();for(var f=0;f<s.length;f++)n(s[f]);var p=d;c.push([0,"chunk-vendors"]),e()})({0:function(t,n,e){t.exports=e("56d7")},1674:function(t,n,e){},"3d14":function(t,n,e){"use strict";var a=e("78d6"),o=e.n(a);o.a},"56d7":function(t,n,e){"use strict";e.r(n);e("cadf"),e("551c"),e("097d");var a=e("2b0e"),o=function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("div",{attrs:{id:"app"}},[t.loading?e("loading"):t._e(),e("router-view")],1)},r=[],c=function(){var t=this,n=t.$createElement;t._self._c;return t._m(0)},u=[function(){var t=this,n=t.$createElement,a=t._self._c||n;return a("div",{staticClass:"loading"},[a("img",{staticClass:"ld ld-spin-fast",staticStyle:{"animation-duration":"1.5s"},attrs:{src:e("cfe6")}})])}],i={name:"loading"},s=i,d=(e("67f3"),e("3d14"),e("2877")),f=Object(d["a"])(s,c,u,!1,null,"54810c56",null);f.options.__file="index.vue";var p=f.exports,l={name:"App",components:{loading:p},computed:{loading:function(){return this.$store.state.loading}}},g=l,h=(e("6eeb"),Object(d["a"])(g,o,r,!1,null,null,null));h.options.__file="App.vue";var m=h.exports,b=e("8c4f");a["a"].use(b["a"]);var v=new b["a"]({routes:[{path:"*",redirect:"/"},{path:"/",component:function(){return e.e("chunk-a15b4a30").then(e.bind(null,"4ef7"))},children:[{path:"",component:function(){return e.e("chunk-1338f2d8").then(e.bind(null,"1fe3"))}},{path:"/search-order",component:function(){return e.e("chunk-39a7ac38").then(e.bind(null,"89a4"))}},{path:"/promotions",component:function(){return e.e("chunk-4ffb7f31").then(e.bind(null,"61af"))}},{path:"/product/:productId",component:function(){return e.e("chunk-18cbd9a0").then(e.bind(null,"bdaa"))}},{path:"/cart",component:function(){return e.e("chunk-ae77ab6c").then(e.bind(null,"ac17"))}},{path:"/checkout/:orderId",component:function(){return e.e("chunk-6183d3f2").then(e.bind(null,"d218"))}}]},{path:"/login",name:"login",component:function(){return e.e("chunk-362b8523").then(e.bind(null,"a512"))}},{path:"/dashboard",name:"dashboard",component:function(){return e.e("chunk-a59a8832").then(e.bind(null,"8884"))},children:[{path:"/admin/product",name:"product",component:function(){return e.e("chunk-bfff6bca").then(e.bind(null,"7d53"))},meta:{requiresAuth:!0}},{path:"/admin/order",name:"order",component:function(){return e.e("chunk-5e6de54f").then(e.bind(null,"0c81"))},meta:{requiresAuth:!0}},{path:"/admin/coupon",name:"coupon",component:function(){return e.e("chunk-7ce5ee79").then(e.bind(null,"f8f7"))},meta:{requiresAuth:!0}}]}],scrollBehavior:function(t,n,e){return{x:0,y:0}}}),O=e("2f62"),T=e("bc3a"),_=e.n(T),E=_.a.create({baseURL:"".concat("https://vue-course-api.hexschool.io","/api/").concat("dandan","/")}),k=_.a.create({baseURL:"".concat("https://vue-course-api.hexschool.io","/api/").concat("dandan","/admin/")}),A=function(t){return E.get("products?page=".concat(t))},P=function(t){return E.get("product/".concat(t))},C=function(t){return E.post("order",t)},R=function(t){return E.get("order/".concat(t))},L=function(t){return E.post("pay/".concat(t),t)},y=function(){return E.get("cart")},S=function(t){return E.post("cart",t)},D=function(t){return E.delete("cart/".concat(t))},w=function(t){return E.post("coupon",t)},U=function(t){return k.get("products?page=".concat(t))},M=function(t){return k.post("product",t)},G=function(t,n){return k.put("product/".concat(t),n)},x=function(t){return k.delete("product/".concat(t))},H=function(t){return k.get("orders?page=".concat(t))},I=function(t,n){return k.put("order/".concat(t),n)},N=function(t){return k.get("coupons?page=".concat(t))},j=function(t){return k.post("coupon",t)},W=function(t,n){return k.put("coupon/".concat(t),n)},q=function(t){return k.delete("coupon/".concat(t))};a["a"].use(O["a"]);var $={namespaced:!0,state:{products:[],pagination:{}},mutations:{getProduct:function(t,n){t.products=n},getPagination:function(t,n){t.pagination=n}},actions:{PRODUCTS_GET:function(t){var n=t.commit;arguments.length>1&&void 0!==arguments[1]&&arguments[1];n("updateLoading",!0,{root:!0}),U().then(function(t){if(!t.data.success)return!1;n("getProduct",t.data.products),n("getPagination",t.data.pagination),n("updateLoading",!1,{root:!0})})},PRODUCT_ADD:function(t,n){var e=t.dispatch;M({data:n}).then(function(t){if(!t.data.success)return!1;e("PRODUCTS_GET"),e("ALERT_SHOW",{isAlert:!0,status:"success",message:t.data.message},{root:!0})})},PRODUCT_EDIT:function(t,n){var e=t.dispatch;G(n.id,{data:n}).then(function(t){if(!t.data.success)return!1;e("PRODUCTS_GET"),e("ALERT_SHOW",{isAlert:!0,status:"success",message:t.data.message},{root:!0})})},PRODUCT_REMOVE:function(t,n){var e=t.dispatch;x(n).then(function(t){t.data.success||e("ALERT_SHOW",{isAlert:!0,status:"danger",message:t.data.message},{root:!0}),e("PRODUCTS_GET"),e("ALERT_SHOW",{isAlert:!0,status:"success",message:t.data.message},{root:!0})})}},getters:{products:function(t){return t.products},pagination:function(t){return t.pagination}}};a["a"].use(O["a"]);var B={namespaced:!0,state:{orders:[],pagination:{}},mutations:{getOrder:function(t,n){t.orders=n},getPagination:function(t,n){t.pagination=n}},actions:{ORDER_GET:function(t){var n=t.commit,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;n("updateLoading",!0,{root:!0}),H(e).then(function(t){if(n("updateLoading",!1,{root:!0}),!t.data.success)return!1;n("getOrder",t.data.orders),n("getPagination",t.data.pagination)})},ORDER_EDIT:function(t,n){var e=t.dispatch;I(n.id,{data:n}).then(function(t){if(!t.data.success)return!1;e("ORDER_GET"),e("ALERT_SHOW",{isAlert:!0,status:"success",message:t.data.message},{root:!0})})}},getters:{orders:function(t){return t.orders},pagination:function(t){return t.pagination}}};a["a"].use(O["a"]);var z={namespaced:!0,state:{coupons:[],pagination:{}},mutations:{getCoupons:function(t,n){t.coupons=n},getPagination:function(t,n){t.pagination=n}},actions:{COUPONS_GET:function(t){var n=t.commit;arguments.length>1&&void 0!==arguments[1]&&arguments[1];n("updateLoading",!0,{root:!0}),N().then(function(t){if(n("updateLoading",!1,{root:!0}),!t.data.success)return!1;n("getCoupons",t.data.coupons),n("getPagination",t.data.pagination)})},COUPON_ADD:function(t,n){var e=t.dispatch;j({data:n}).then(function(t){if(!t.data.success)return!1;e("COUPONS_GET"),e("ALERT_SHOW",{isAlert:!0,status:"success",message:t.data.message},{root:!0})})},COUPON_EDIT:function(t,n){var e=t.dispatch;W(n.id,{data:n}).then(function(t){if(!t.data.success)return!1;e("COUPONS_GET"),e("ALERT_SHOW",{isAlert:!0,status:"success",message:t.data.message},{root:!0})})},COUPON_REMOVE:function(t,n){var e=t.dispatch;q(n).then(function(t){t.data.success||e("ALERT_SHOW",{isAlert:!0,status:"danger",message:t.data.message},{root:!0}),e("COUPONS_GET"),e("ALERT_SHOW",{isAlert:!0,status:"success",message:t.data.message},{root:!0})})}},getters:{coupons:function(t){return t.coupons},pagination:function(t){return t.pagination}}};e("1c4c"),e("ac6a"),e("5df3"),e("4f7f");a["a"].use(O["a"]);var V={namespaced:!0,state:{products:[],pagination:{},currentCategory:"全部商品",product:{}},mutations:{getProducts:function(t,n){t.products=n},getPagination:function(t,n){t.pagination=n},updateCategory:function(t,n){t.currentCategory=n},getProduct:function(t,n){t.product=n}},actions:{PRODUCTS_GET:function(t){var n=t.commit,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;n("updateLoading",!0,{root:!0}),A(e).then(function(t){if(n("updateLoading",!1,{root:!0}),!t.data.success)return!1;n("getProducts",t.data.products),n("getPagination",t.data.pagination)})},PRODUCT_GET:function(t,n){var e=t.commit;e("updateLoading",!0,{root:!0}),P(n).then(function(t){if(e("updateLoading",!1,{root:!0}),!t.data.success)return!1;e("getProduct",t.data.product)})}},getters:{categories:function(t){var n=new Set;t.products.forEach(function(t){if(!t.category)return!1;n.add(t.category)});var e=Array.from(n);return e.unshift("全部商品"),e},products:function(t){return t.currentCategory&&"全部商品"!==t.currentCategory?t.products.filter(function(n){return n.category===t.currentCategory}):t.products},pagination:function(t){return t.pagination}}};a["a"].use(O["a"]);var F={namespaced:!0,state:{loadingItem:"",carts:[],couponMessage:""},mutations:{updateLoadingItem:function(t,n){t.loadingItem=n},getCarts:function(t,n){t.carts=n},updateCouponMes:function(t,n){t.couponMessage=n}},actions:{CARTS_GET:function(t){var n=t.commit;n("updateLoading",!0,{root:!0}),y().then(function(t){if(n("updateLoading",!1,{root:!0}),!t.data.success)return!1;n("getCarts",t.data.data)})},CART_ADD:function(t,n){var e=t.commit,a=t.dispatch;e("updateLoadingItem",n.product_id),S({data:n}).then(function(t){if(e("updateLoadingItem",""),!t.data.success)return!1;a("CARTS_GET")})},CART_REMOVE:function(t,n){var e=t.commit,a=t.dispatch;e("updateLoading",!0,{root:!0}),D(n).then(function(t){if(e("updateLoading",!1,{root:!0}),!t.data.success)return!1;a("CARTS_GET")})},COUPON_APPLY:function(t,n){var e=t.commit,a=t.dispatch;e("updateLoading",!0,{root:!0}),w({data:{code:n}}).then(function(t){if(e("updateLoading",!1,{root:!0}),e("updateCouponMes",t.data.message),!t.data.success)return!1;a("CARTS_GET")})}},getters:{cartItem:function(t){return t.carts.carts},cartCount:function(t,n){return n.cartItem?n.cartItem.length:0},cartTotal:function(t){return t.carts.total},cartFinalTotal:function(t){return t.carts.final_total},couponMessage:function(t){return t.couponMessage}}};a["a"].use(O["a"]);var J={namespaced:!0,state:{order:{}},mutations:{getOrder:function(t,n){t.order=n}},actions:{ORDER_CREATE:function(t,n){var e=t.commit;return e("updateLoading",!0,{root:!0}),new Promise(function(t){C({data:n}).then(function(n){if(e("updateLoading",!1,{root:!0}),!n.data.success)return!1;t(n.data)})})},ORDER_GET:function(t,n){var e=t.commit;return e("updateLoading",!0,{root:!0}),new Promise(function(t){R(n).then(function(n){e("updateLoading",!1,{root:!0}),t(n.data),e("getOrder",n.data.order)})})},ORDER_PAY:function(t,n){var e=t.commit,a=t.dispatch;e("updateLoading",!0,{root:!0}),L(n).then(function(t){if(e("updateLoading",!1,{root:!0}),!t.data.success)return!1;a("ORDER_GET",n)})}},getters:{}};a["a"].use(O["a"]);var Y=new O["a"].Store({strict:!1,modules:{AdminProductModules:$,AdminOrderModules:B,AdminCouponModules:z,UserProductsModules:V,UserCartModules:F,UserOrderModules:J},state:{loading:!1,alert:{isAlert:!1,status:"",message:""},token:""},mutations:{updateLoading:function(t,n){t.loading=n},alertHandler:function(t,n){t.alert=n},setToken:function(t,n){t.token=n}},actions:{ALERT_SHOW:function(t,n){var e=t.commit;e("alertHandler",n),setTimeout(function(){var t={isAlert:!1};e("alertHandler",t)},2e3)},ALERT_CLOSE:function(t,n){var e=t.commit;e("alertHandler",n)}}}),K=(e("4989"),e("a481"),e("c5f6"),function(t){if(t){var n=Number(t);return"$".concat(n.toFixed(0).replace(/./g,function(t,n,e){var a=n&&"."!==t&&(e.length-n)%3===0?", ".concat(t).replace(/\s/g,""):t;return a}))}}),Q=function(t){if(t){var n=new Date(1e3*t);return n.toLocaleDateString()}},X=e("427f"),Z=e.n(X),tt=e("7bb1");a["a"].config.productionTip=!1,_.a.defaults.withCredentials=!0,a["a"].filter("currency",K),a["a"].filter("timestamp",Q),tt["a"].localize("zh_TW",Z.a),a["a"].use(tt["b"],{locale:"zh_TW"}),new a["a"]({router:v,store:Y,render:function(t){return t(m)}}).$mount("#app"),v.beforeEach(function(t,n,e){if(t.meta.requiresAuth){var a="".concat("https://vue-course-api.hexschool.io","/api/user/check");_.a.post(a).then(function(t){t.data.success?e():e({path:"/login"})}).catch(function(t){console.log(t)})}else e()})},"67f3":function(t,n,e){"use strict";var a=e("cb4d"),o=e.n(a);o.a},"6eeb":function(t,n,e){"use strict";var a=e("1674"),o=e.n(a);o.a},"78d6":function(t,n,e){},cb4d:function(t,n,e){},cfe6:function(t,n,e){t.exports=e.p+"img/candies.ecd7c320.png"}});
//# sourceMappingURL=app.40b7272f.js.map